<!doctype html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8" />
  <meta name="robots" content="noindex, nofollow">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="css" href="https://cdn.jsdmirror.com/gh/FrecklyComb1728/blog@main/public/fonts/xiaolai.css" />
  <title>å®‰å…¨ä¸­å¿ƒ | MIFENG BLOG</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      user-select: none;
      box-sizing: border-box;
    }

    :root {
      --main-site-background: #f7f9fe;
      --main-card-border: #e3e8f7;
      --main-card-background: #fff;
      --main-font-color: #363636;
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --main-site-background: #18171d;
        --main-card-border: #3d3d3f;
        --main-card-background: #1b1c20;
        --main-font-color: #f7f7fa;
      }
    }

    a {
      text-decoration: none;
      color: var(--main-font-color);
    }

    body {
      background-color: var(--main-site-background);
      color: var(--main-font-color);
      font-family: "CKYHDY", "PingFang SC", "Open Sans", "Microsoft YaHei", sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      width: 100vw;
      width: 100dvw;
      height: 100vh;
      height: 100dvh;
      overflow: hidden;
      transition:
        color 0.3s,
        background-color 0.3s;
    }

    header {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    header .logo img {
      width: 100px;
      height: 100px;
      margin-bottom: 20px;
    }

    header .title {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    header .title .site-name {
      font-size: 30px;
      font-weight: bold;
    }

    header .title .site-tip {
      font-size: 20px;
      margin-top: 8px;
      opacity: 0.6;
    }

    main {
      margin: 30px 20px 60px;
      border-radius: 16px;
      padding: 30px;  
      max-width: 500px;
      min-width: 380px;
      background-color: var(--main-card-background);
      border: 1px solid var(--main-card-border);
    }

    main .tip {
      display: flex;
      justify-content: center;
      margin-bottom: 20px;
      opacity: 0.4;
    }

    main .url-container {
      position: relative;
      display: flex;
      align-items: center;
      width: 100%;
    }

    main #url {
      display: block;
      padding: 12px 50px 12px 20px;
      border-radius: 8px;
      width: 100%;
      text-align: left;
      border: 1px solid var(--main-card-border);
      background-color: var(--main-site-background);
      white-space: nowrap;
      overflow: hidden;
      position: relative;
    }

    main #url::after {
      content: "";
      position: absolute;
      right: 0px;
      top: 0;
      bottom: 0;
      width: 50%;
      background: linear-gradient(to right, transparent, var(--main-site-background));
      pointer-events: none;
    }

    main .copy-btn {
      position: absolute;
      right: 8px;
      top: 50%;
      transform: translateY(-50%);
      width: 32px;
      height: 32px;
      border: none;
      border-radius: 6px;
      background-color: var(--main-card-border);
      color: var(--main-font-color);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background-color 0.3s, transform 0.2s;
      z-index: 1;
    }

    main .copy-btn:hover {
      background-color: var(--main-card-background);
      transform: translateY(-50%) scale(1.05);
    }

    main .copy-btn:active {
      transform: translateY(-50%) scale(0.95);
    }

    main .copy-btn svg {
      width: 16px;
      height: 16px;
    }

    main .copy-btn.copied {
      background-color: #00d26a;
    }

    main #site-info {
      display: inline-flex;
      width: 100%;
      flex-direction: row;
      align-items: center;
      justify-content: center;
      margin-top: 20px;
      font-size: 18px;
    }

    main #jump-content.warn {
      color: #ffb02e;
    }

    main #jump-content.safe {
      color: #00d26a;
    }

    main #jump-content.danger {
      color: #f8312f;
    }

    main #jump-button {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 44px;
      width: 160px;
      margin: 30px auto 0;
      border-radius: 8px;
      color: var(--main-font-color);
      background-color: var(--main-card-border);
      transition: background-color 0.3s;
      cursor: pointer;
    }

    main #jump-button:hover {
      background-color: var(--main-site-background);
    }

    footer {
      width: 100%;
      text-align: center;
      position: absolute;
      bottom: 0;
      margin: 20px;
      opacity: 0.6;
      font-size: 15px;
    }

    footer .icp::before {
      content: "|";
      margin: 0 8px;
      margin-left: 4px;
      opacity: 0.2;
    }
  </style>
</head>

<body>
  <header>
    <div class="logo">
      <img src="./images/logo/logo.svg" alt="" />
    </div>
    <div class="title">
      <span class="site-name">MIFENG BLOG</span>
      <span class="site-tip">å®‰å…¨ä¸­å¿ƒ</span>
    </div>
  </header>
  <main>
    <span class="tip">æ‚¨å³å°†ç¦»å¼€MIFENG BLOGï¼Œå‰å¾€</span>
    <div class="url-container">
      <span id="url"></span>
      <button class="copy-btn" id="copy-btn" title="å¤åˆ¶é“¾æ¥">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
          stroke-linecap="round" stroke-linejoin="round">
          <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
          <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
        </svg>
      </button>
    </div>
    <div id="jump-content" class="warn">
      <span id="site-info">ğŸ”´ è¯¥ç½‘å€å®‰å…¨æ€§æœªçŸ¥ï¼Œè¯·æ³¨æ„æ‚¨çš„å¸å·å’Œè´¢äº§å®‰å…¨</span>
      <div id="jump-button">ç»§ç»­å‰å¾€</div>
    </div>
  </main>
  <footer>
    <a class="power" href="https://blog.imbee.top/">
      Â©
      <script>
        document.write(new Date().getFullYear());
      </script>
      MIFENG BLOG
    </a>
    <a class="icp" href="https://beian.miit.gov.cn/" target="_blank"> ç²¤ICPå¤‡2024256994å·-3 </a>
  </footer>
  <script>
    // è·³è½¬ç½‘å€
    let jumpLink;
    let interval;
    // è·å–å…ƒç´ 
    const urlDom = document.getElementById("url");
    const urlTip = document.getElementById("site-info");
    const jumpContent = document.getElementById("jump-content");
    const jumpButton = document.getElementById("jump-button");
    // ç½‘å€ç™½åå•
    const whitelist = [
      "*.imbee.*",
      "*.mfawa.*",
      "*.mxdyeah.*",
      "*.jsdelivr.com",
      "*.chiyu.it",
      "gitee.com",
      "*.github*.com",
      "*.github.io",
      "*.github.dev",
      "*.google.com",
      "*.baidu.com",
      "*.bing.cn",
      "*.npmjs.com",
      "*guxinglei.com",
      "*.xiaolan.xin",
      "*.2x.nz",
      "*.2b2x.cn",
      "*.sakura.ink",
      "*.strarry.top",
      "qiqinb.cn",
      "wyf9.top",
      "*.siiway.*",
      "*.bee-zh.cn",
      "*.20110805.xyz",
      "*.coderror.top",
      "*.vercel.com",
      "*.netlify.com",
      "*.nuxt.com",
      "*.cloudflare*.*",
      "*.bilibili.com",
    ];
    // ç½‘å€é»‘åå•
    const blacklist = ["*.taobao.com", "*.jd.com", "c.pc.qq.com", "*.kuaishou.com"];
    // æç¤ºæ–‡æœ¬
    const tipText = {
      safe: "ğŸŸ¢ è¯¥ç½‘å€ä¸ºä¿¡ä»»ç½‘å€ï¼Œå³å°†è·³è½¬",
      danger: "âŒ è¯¥ç½‘å€å¤„äºé»‘åå•",
    };
    // è‡ªåŠ¨è·³è½¬
    const autoJump = () => {
      let count = 3;
      const updateContent = () => {
        jumpButton.innerHTML = `${count} ç§’åè‡ªåŠ¨è·³è½¬`;
        count--;
        if (count < 0) {
          clearInterval(interval);
          jumpButton.innerHTML = "æ­£åœ¨è·³è½¬";
          window.location.replace(jumpLink);
        }
      };
      // æ¯ç§’æ›´æ–°ä¸€æ¬¡
      updateContent();
      interval = setInterval(updateContent, 1000);
    };
    // è·å–è·³è½¬ç½‘å€
    const getJumpUrl = () => {
      try {
        // è§£æ URL å‚æ•°
        const urlParams = new URLSearchParams(window.location.search);
        const encodedUrl = urlParams.get("url");
        // è§£å¯† Base64
        jumpLink = atob(encodedUrl);
        urlDom.innerHTML = jumpLink;
        // è·å–ç½‘å€çš„ä¸»æœºå
        const urlHostname = new URL(jumpLink).hostname;
        // åˆ¤æ–­ç½‘å€æ˜¯å¦åœ¨é»‘åå•ä¸­
        for (let i = 0; i < blacklist.length; i++) {
          const blackPattern = blacklist[i].replace(/\*/g, ".*");
          if (urlHostname.match(blackPattern)) {
            // æ˜¾ç¤ºæç¤ºä¿¡æ¯
            urlTip.innerHTML = tipText.danger;
            jumpButton.innerHTML = "ç¦æ­¢è·³è½¬";
            jumpButton.style.cursor = "not-allowed";
            jumpButton.style.pointerEvents = "none";
            jumpButton.style.opacity = "0.4";
            jumpContent.className = "danger";
            return true;
          }
        }
        // åˆ¤æ–­ç½‘å€æ˜¯å¦åœ¨ç™½åå•ä¸­
        for (let i = 0; i < whitelist.length; i++) {
          let pattern = whitelist[i];
          let whitePattern;
          if (pattern.startsWith("*.")) {
            // *.domain.com -> (.*\.)?domain\.com
            const baseDomain = pattern.slice(2).replace(/\./g, "\\.").replace(/\*/g, ".*");
            whitePattern = `^(.*\\.)?${baseDomain}$`;
          } else {
            whitePattern = "^" + pattern.replace(/\./g, "\\.").replace(/\*/g, ".*") + "$";
          }
          if (urlHostname.match(new RegExp(whitePattern))) {
            // æ˜¾ç¤ºæç¤ºä¿¡æ¯
            urlTip.innerHTML = tipText.safe;
            jumpContent.className = "safe";
            autoJump();
            return true;
          }
        }
      } catch (error) {
        console.error(error);
        jumpContent.remove();
        urlDom.innerHTML = "è·å–è·³è½¬é“¾æ¥å¤±è´¥";
      }
    };
    document.addEventListener("contextmenu", function (event) {
      event.preventDefault();
    });
    document.addEventListener("keydown", function (event) {
      if (event.keyCode === 123) {
        event.preventDefault();
      }
      if (
        event.ctrlKey &&
        event.shiftKey &&
        (event.keyCode === 73 || event.keyCode === 74 || event.keyCode === 67)
      ) {
        event.preventDefault();
      }
    });
    jumpButton.addEventListener("click", () => {
      clearInterval(interval);
      jumpButton.innerHTML = "æ­£åœ¨è·³è½¬";
      if (jumpLink) window.location.replace(jumpLink);
    });
    // å¤åˆ¶é“¾æ¥åŠŸèƒ½
    const copyBtn = document.getElementById("copy-btn");
    copyBtn.addEventListener("click", async () => {
      if (!jumpLink) return;
      try {
        await navigator.clipboard.writeText(jumpLink);
        copyBtn.classList.add("copied");
        copyBtn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>`;
        setTimeout(() => {
          copyBtn.classList.remove("copied");
          copyBtn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>`;
        }, 2000);
      } catch (err) {
        console.error("å¤åˆ¶å¤±è´¥:", err);
      }
    });
    window.addEventListener("DOMContentLoaded", () => {
      getJumpUrl();
    });
  </script>
</body>

</html>